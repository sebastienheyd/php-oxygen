<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
        <link rel="stylesheet" type="text/css" href="../../css/guide.css" />        
        <script type="text/javascript">var basepath = '../../'; var lang = 'fr';</script>        
        <script type="text/javascript" src="../../js/loader.js"></script>        
    </head>
    <body>     
        <h1>Traduction</h1>
        <p>
            Dans PHP Oxygen tout a été fait pour simplifier au maximum la traduction de vos applications, 
            que ce soit pour l'affichage des dates, l'affichage dans les scripts ou dans les templates.
        </p>                
        
        <h2>Principe</h2>
        <p>
            Pour effectuer une traduction vous devez définir la langue par défaut de votre application. 
            Cette langue permettra de savoir si les textes de l'application doivent être traduits ou non. 
            En effet si la langue définie dans votre application est différente de la langue par défaut, 
            l'application sait alors qu'elle doit traduire les phrases qu'on lui donne.             
        </p>
        
        <blockquote class="info">Les méthodes de traductions sont regroupées dans la classe <a href="../classes/i18n.html">i18n</a>.</blockquote>
               
        <h2>Configuration</h2>
        <p>
            Pour définir la langue par défaut il suffit de définir le paramètre locale dans la section general du fichier de configuration.
        </p>
        
        <p>
            Dans PHP Oxygen il est possible de définir une langue, mais également une région. 
            En effet, pour une même langue il est possible d'avoir des interprétations différentes.
            Exemple : au Québec on dira "chez le nettoyeur" alors qu'en France on dira plutôt "au pressing". 
            Pour cela on définira par exemple fr_CA pour le Québec et fr_FR pour la France.
        </p>
        
        <blockquote class="info">
            Le code de locale est un code composé d'un code ISO 639-1 en minuscule et une code ISO 3166 séparé par un caractère "underscore". 
            Exemples : en_US, fr_FR, de_CH, etc...
        </blockquote>
        
        <h2>Exemples de traductions</h2>
        <p>
            Après avoir configuré la langue par défaut il est nécessaire d'indiquer à votre application la langue (et/ou la région) que vous voulez utiliser pendant son exécution.
            Pour cela il suffit d'appeler la méthode statique <a href="../classes/i18n.html">i18n::setLocale()</a>. 
            Il est recommandé de l'appeler qu'une seule fois et le plus en amont possible dans l'exécution de vos scripts. 
            A partir de l'appel à cet méthode toutes méthodes de traductions utiliseront la locale définie et traduiront (ou non) les textes.
        </p>
        
        <h3>Traduction dans une action (contrôleur)</h3>
        <p>
            La traduction d'un texte dans un contrôleur se fait en utilisant la méthode t() se trouvant dans la classe héritée "Action".
            Exemple
        </p>
        <php> 
            // La classe hérite bien de la classe Action            
            class m_demo_action_i18n extends Action
            {
                public function execute()
                {     
                    // Dans l'exemple la langue définie par défaut est fr_FR                
                    echo $this->t('Ceci est un texte de démonstration').' / '.;
                    
                    // On défini l'anglais des Etats-unis pour la suite de l'exécution
                    i18n::setLocale('en_US');
                    
                    // On affiche le même texte mais traduit
                    echo $this->t('Ceci est un texte de démonstration');
                }
            }            
        </php>
        
        <p>A la première exécution voici ce qui s'affiche</p>
        
        <blockquote class="screen">
            Ceci est un texte de démonstration / Ceci est un texte de démonstration
        </blockquote>
        
        <p>
            On voit que le texte n'a pas été traduit ce qui est normal car nous ne l'avons pas encore défini dans un fichier de traduction.
            Dans cet exemple un fichier vient d'être créé automatiquement dans le dossier i18n du module demo (le nom du module est récupéré en fonction du nom de la classe).
            Le fichier est nommé "actions.en.xml" car par défaut les traductions des contrôleurs sont identifiés comme "messages" et la langue appelée est "en" (anglais). 
            En ouvrant le fichier on voit
        </p>
        
        <xml>
            &lt; &#63; version="1.0" encoding="UTF-8" &#63;&gt;
            &lt;xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2"&gt;
                &lt;file source-language="fr" datatype="plaintext" original="m_default_action_Index"&gt;
                    &lt; body &gt;
                        &lt;trans-unit id="1"&gt;
                            &lt;source&gt;Ceci est un texte de démonstration&lt; /source&gt;
                            &lt;target&gt;&lt;/target&gt;
                        &lt;/trans-unit&gt;
                    &lt; /body &gt;
                &lt;/file&gt;
            &lt;/xliff&gt;
        </xml>
        
        On va alors définir la traduction du texte comme ceci
        
        <xml>
            &lt;source&gt;Ceci est un texte de démonstration&lt; /source&gt;
            &lt;target&gt;This is a demonstration text&lt;/target&gt;
        </xml>
        
        <p>En relançant notre script on aura cette fois ci</p>
        
        <blockquote class="screen">
            Ceci est un texte de démonstration / This is a demonstration text
        </blockquote>
        
    </body>            
</html>